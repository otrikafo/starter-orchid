import{C as $,c as a,o as i,a as e,w as g,d as m,e as k,u as l,H as w,t as r,v as I,f as S,F as f,r as h,b as v,g as _,h as c,P as b}from"./app-DMTjTVQZ.js";/* empty css                                                                   */import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V}from"./VisitorLayout-BEoXhik2.js";import"./VisitorBreadcrumbs-D33gSTMY.js";const C={class:"avis-agence-form"},A={key:0,class:"error"},D={key:0,class:"error"},L=["disabled"],j={__name:"AvisAgenceForm",props:{agenceId:{type:String,required:!0}},setup(u){const p=u,n=$({note:3,commentaire:""}),o=()=>{console.log(p.agenceId),n.post(route("agences.avis.store",{agence:p.agenceId}),{onSuccess:()=>{n.reset(),alert("Merci pour votre avis !")}})};return(s,t)=>(i(),a("div",C,[t[5]||(t[5]=e("h3",null,"Laisser un avis sur cette agence",-1)),e("form",{onSubmit:S(o,["prevent"])},[e("div",null,[t[3]||(t[3]=e("label",{for:"note"},"Note (sur 5)",-1)),g(e("select",{id:"note","onUpdate:modelValue":t[0]||(t[0]=d=>l(n).note=d)},t[2]||(t[2]=[w('<option value="1" data-v-ffa25f1e>1 - Très mauvais</option><option value="2" data-v-ffa25f1e>2 - Mauvais</option><option value="3" data-v-ffa25f1e>3 - Moyen</option><option value="4" data-v-ffa25f1e>4 - Bon</option><option value="5" data-v-ffa25f1e>5 - Excellent</option>',5)]),512),[[k,l(n).note,void 0,{number:!0}]]),l(n).errors.note?(i(),a("div",A,r(l(n).errors.note),1)):m("",!0)]),e("div",null,[t[4]||(t[4]=e("label",{for:"commentaire"},"Commentaire",-1)),g(e("textarea",{id:"commentaire","onUpdate:modelValue":t[1]||(t[1]=d=>l(n).commentaire=d),rows:"4"},null,512),[[I,l(n).commentaire]]),l(n).errors.commentaire?(i(),a("div",D,r(l(n).errors.commentaire),1)):m("",!0)]),e("button",{type:"submit",disabled:l(n).processing},"Envoyer l'avis",8,L)],32)]))}},N=y(j,[["__scopeId","data-v-ffa25f1e"]]),B={class:"agence-show-container"},M={class:"agence-header"},E={class:"agence-name"},F={class:"agence-details-section"},P={class:"detail-card"},U={class:"detail-item"},O={class:"detail-item"},R=["href"],T={class:"biens-section"},q={key:0,class:"biens-grid"},z={class:"bien-title"},H={class:"bien-location"},G={class:"bien-price"},J={key:1,class:"empty-section"},K={class:"avis-section"},Q={key:0,class:"avis-list"},W={class:"avis-header"},X={class:"avis-rating"},Y={class:"rating-value"},Z={class:"avis-author"},x={class:"avis-body"},ee={class:"avis-comment"},se={class:"avis-footer"},te={class:"avis-date"},oe={key:1,class:"empty-section"},ae={key:2,class:"avis-action"},ie={key:3,class:"avis-action"},ne={key:4,class:"avis-action"},re=Object.assign({layout:V},{__name:"Show",props:{agence:Object,aDejaLaisseAvis:Boolean,agence:Object},setup(u){const p=u,n=async()=>{try{const s=(await axios.post("/start-private-chat",{agence_id:p.agence.id})).data.roomId;console.log("Room ID:",s);const t=route("chat.show",{room:s});console.log("URL:",t);const d=`Cliquez <a href="${t}">ici</a> pour accéder au chat privé`;Swal.fire({title:"Chat privé démarré",html:d}),console.log("Redirection vers la page de chat privé")}catch(o){console.error("Erreur lors du démarrage du chat privé:",o)}};return(o,s)=>(i(),a("div",B,[e("div",M,[e("h1",E,r(o.$page.props.agence.raison_sociale),1),e("button",{onClick:n},"Démarrer le Chat Privé")]),e("section",F,[e("div",P,[s[2]||(s[2]=e("h2",{class:"section-title"},"Informations de l'agence",-1)),e("div",U,[s[0]||(s[0]=e("i",{class:"fas fa-map-marker-alt detail-icon"},null,-1)),e("span",null,r(o.$page.props.agence.siege),1)]),e("div",O,[s[1]||(s[1]=e("i",{class:"fas fa-envelope detail-icon"},null,-1)),e("a",{href:`mailto:${o.$page.props.agence.email}`,class:"detail-link"},r(o.$page.props.agence.email),9,R)])])]),e("section",T,[s[6]||(s[6]=e("h2",{class:"section-title"},"Biens proposés par cette agence",-1)),o.$page.props.agence.biens.length>0?(i(),a("div",q,[(i(!0),a(f,null,h(o.$page.props.agence.biens,t=>(i(),a("div",{key:t.id,class:"bien-card"},[e("h3",z,r(t.titre),1),e("p",H,[s[3]||(s[3]=e("i",{class:"fas fa-map-marker-alt"},null,-1)),c(" "+r(t.ville),1)]),e("p",G,r(t.prix)+" €",1),v(l(b),{href:o.route("biens.show",{bien:t.id}),class:"view-detail-link"},{default:_(()=>s[4]||(s[4]=[c(" Voir le détail "),e("i",{class:"fas fa-arrow-right"},null,-1)])),_:2},1032,["href"])]))),128))])):(i(),a("div",J,s[5]||(s[5]=[e("p",null,"Cette agence n'a pas encore de biens à proposer.",-1)])))]),e("section",K,[s[13]||(s[13]=e("h2",{class:"section-title"},"Avis sur cette agence",-1)),o.$page.props.agence.avis_agences.length>0?(i(),a("div",Q,[(i(!0),a(f,null,h(o.$page.props.agence.avis_agences,t=>(i(),a("div",{key:t.id,class:"avis-card"},[e("div",W,[e("div",X,[s[7]||(s[7]=c("Note: ")),e("span",Y,r(t.note),1),s[8]||(s[8]=c("/5 ")),s[9]||(s[9]=e("i",{class:"fas fa-star star-icon"},null,-1))]),e("div",Z,"Par: "+r(t.visiteur.email),1)]),e("div",x,[e("p",ee,'"'+r(t.commentaire)+'"',1)]),e("div",se,[e("span",te,"Le: "+r(new Date(t.created_at).toLocaleDateString()),1)])]))),128))])):(i(),a("div",oe,s[10]||(s[10]=[e("p",null,"Aucun avis pour le moment.",-1)]))),o.$page.props.auth.visiteur&&!o.$page.props.aDejaLaisseAvis?(i(),a("div",ae,[v(N,{agenceId:o.$page.props.agence.id},null,8,["agenceId"])])):m("",!0),o.$page.props.auth.visiteur&&o.$page.props.aDejaLaisseAvis?(i(),a("div",ie,s[11]||(s[11]=[e("p",null,"Vous avez déjà laissé un avis sur cette agence.",-1)]))):(i(),a("div",ne,[v(l(b),{href:o.route("visiteur.connexion"),class:"avis-button login-button"},{default:_(()=>s[12]||(s[12]=[c("Se connecter pour laisser un avis "),e("i",{class:"fas fa-sign-in-alt"},null,-1)])),_:1},8,["href"])]))]),s[14]||(s[14]=e("section",null,null,-1))]))}}),ve=y(re,[["__scopeId","data-v-092a7e15"]]);export{ve as default};
